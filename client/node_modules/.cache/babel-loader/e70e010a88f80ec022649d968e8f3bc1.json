{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/home/karl/vscode/video-game-data/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/karl/vscode/video-game-data/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import\"./Games.css\";import Game from\"../Game/Game\";import SearchBar from\"../SearchBar/SearchBar\";import RadioButtons from\"../RadioButtons/RadioButtons\";import LoadMoreBtn from\"../LoadMoreBtn/LoadMoreBtn\";import MoonLoader from\"react-spinners/ClipLoader\";function Games(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),data=_React$useState2[0],setData=_React$useState2[1];var _React$useState3=React.useState({titleInput:\"\",publisherInput:\"\",radioButtonInput:\"-YearReleased\",arrowBtn:true,// pointing up if true\npageNum:1,// pagination number\nlimit:20// records per page\n}),_React$useState4=_slicedToArray(_React$useState3,2),searchInput=_React$useState4[0],setSearchInput=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),loading=_React$useState6[0],setLoading=_React$useState6[1];// Initial fetch on page load and if searchInput changes\nuseEffect(function(){// Make sure '-' is appended to radioButtonInput if needed\nvar radioButtonVal;if(searchInput.arrowBtn){radioButtonVal=searchInput.radioButtonInput.charAt(0)===\"-\"?searchInput.radioButtonInput:\"-\"+searchInput.radioButtonInput;}else radioButtonVal=searchInput.radioButtonInput.charAt(0)===\"-\"?searchInput.radioButtonInput.substring(1):searchInput.radioButtonInput;setLoading(true);fetch(//\"https://video-game-data-api.herokuapp.com/api/video-game-data/data/?page=1&limit=20\",\n\"http://localhost:5000/api/video-game-data/data/?page=\".concat(searchInput.pageNum,\"&limit=\").concat(searchInput.limit,\"&sort=\").concat(radioButtonVal,\"&filterTitle=\").concat(searchInput.titleInput,\"&filterPublisher=\").concat(searchInput.publisherInput),{method:\"GET\"}).then(function(res){return res.json();}).then(function(data){setData(data);setLoading(false);}).catch(function(error){return console.log(\"Something wrong with api :(\");});},[searchInput]);var onTitleInputChange=function onTitleInputChange(e){setSearchInput(_objectSpread(_objectSpread({},searchInput),{},{titleInput:e.target.value.toLowerCase()}));};var onPublisherInputChange=function onPublisherInputChange(e){setSearchInput(_objectSpread(_objectSpread({},searchInput),{},{publisherInput:e.target.value.toLowerCase()}));};var onRadioButtonClick=function onRadioButtonClick(selection){setSearchInput(_objectSpread(_objectSpread({},searchInput),{},{radioButtonInput:selection}));};var onArrowClick=function onArrowClick(){setSearchInput(_objectSpread(_objectSpread({},searchInput),{},{arrowBtn:!searchInput.arrowBtn}));};var onLoadMoreBtnClick=function onLoadMoreBtnClick(){setSearchInput(_objectSpread(_objectSpread({},searchInput),{},{limit:searchInput.limit+20}));};// Takes the records from the data array and returns game componentes for each\nvar createGameComponents=function createGameComponents(){var gamesList=data.data.videoGames.map(function(row,index){return/*#__PURE__*/_jsx(Game,{gameData:row},index);});console.log(\"finished creating game components\");return gamesList;};return/*#__PURE__*/_jsxs(\"div\",{className:\"games\",children:[/*#__PURE__*/_jsx(SearchBar,{placeholder:\"Search by Tile...\",onChange:onTitleInputChange}),/*#__PURE__*/_jsx(SearchBar,{placeholder:\"Search by Publisher...\",onChange:onPublisherInputChange}),/*#__PURE__*/_jsx(RadioButtons,{onClick:onRadioButtonClick,onArrowClick:onArrowClick,buttonVal:searchInput.radioButtonInput,arrowBtn:searchInput.arrowBtn}),/*#__PURE__*/_jsx(\"div\",{className:\"spinner\",children:/*#__PURE__*/_jsx(MoonLoader,{color:\"red\",loading:loading,size:180})}),/*#__PURE__*/_jsx(\"p\",{children:data.data?\"Showing \".concat(data.data.videoGames.length,\" of \").concat(data.totalResults,\" Games\"):null}),data.data?createGameComponents():null,data.hasNextPage===true?/*#__PURE__*/_jsx(LoadMoreBtn,{onClick:onLoadMoreBtnClick}):null]});}export default Games;","map":{"version":3,"sources":["/home/karl/vscode/video-game-data/client/src/Components/Games/Games.js"],"names":["React","useEffect","Game","SearchBar","RadioButtons","LoadMoreBtn","MoonLoader","Games","useState","data","setData","titleInput","publisherInput","radioButtonInput","arrowBtn","pageNum","limit","searchInput","setSearchInput","loading","setLoading","radioButtonVal","charAt","substring","fetch","method","then","res","json","catch","error","console","log","onTitleInputChange","e","target","value","toLowerCase","onPublisherInputChange","onRadioButtonClick","selection","onArrowClick","onLoadMoreBtnClick","createGameComponents","gamesList","videoGames","map","row","index","length","totalResults","hasNextPage"],"mappings":"qZAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,2BAAvB,CAEA,QAASC,CAAAA,KAAT,EAAiB,qBACSP,KAAK,CAACQ,QAAN,CAAe,EAAf,CADT,oDACRC,IADQ,qBACFC,OADE,0CAEuBV,KAAK,CAACQ,QAAN,CAAe,CACnDG,UAAU,CAAE,EADuC,CAEnDC,cAAc,CAAE,EAFmC,CAGnDC,gBAAgB,CAAE,eAHiC,CAInDC,QAAQ,CAAE,IAJyC,CAInC;AAChBC,OAAO,CAAE,CAL0C,CAKvC;AACZC,KAAK,CAAE,EAAI;AANwC,CAAf,CAFvB,qDAERC,WAFQ,qBAEKC,cAFL,0CAUelB,KAAK,CAACQ,QAAN,CAAe,KAAf,CAVf,qDAURW,OAVQ,qBAUCC,UAVD,qBAYf;AACAnB,SAAS,CAAC,UAAM,CACd;AACA,GAAIoB,CAAAA,cAAJ,CACA,GAAIJ,WAAW,CAACH,QAAhB,CAA0B,CACxBO,cAAc,CACZJ,WAAW,CAACJ,gBAAZ,CAA6BS,MAA7B,CAAoC,CAApC,IAA2C,GAA3C,CACIL,WAAW,CAACJ,gBADhB,CAEI,IAAMI,WAAW,CAACJ,gBAHxB,CAID,CALD,IAMEQ,CAAAA,cAAc,CACZJ,WAAW,CAACJ,gBAAZ,CAA6BS,MAA7B,CAAoC,CAApC,IAA2C,GAA3C,CACIL,WAAW,CAACJ,gBAAZ,CAA6BU,SAA7B,CAAuC,CAAvC,CADJ,CAEIN,WAAW,CAACJ,gBAHlB,CAKFO,UAAU,CAAC,IAAD,CAAV,CACAI,KAAK,CACH;AADG,+DAEqDP,WAAW,CAACF,OAFjE,mBAEkFE,WAAW,CAACD,KAF9F,kBAE4GK,cAF5G,yBAE0IJ,WAAW,CAACN,UAFtJ,6BAEoLM,WAAW,CAACL,cAFhM,EAGH,CACEa,MAAM,CAAE,KADV,CAHG,CAAL,CAOGC,IAPH,CAOQ,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAPR,EAQGF,IARH,CAQQ,SAACjB,IAAD,CAAU,CACdC,OAAO,CAACD,IAAD,CAAP,CACAW,UAAU,CAAC,KAAD,CAAV,CACD,CAXH,EAYGS,KAZH,CAYS,SAACC,KAAD,QAAWC,CAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ,CAAX,EAZT,EAaD,CA5BQ,CA4BN,CAACf,WAAD,CA5BM,CAAT,CA8BA,GAAMgB,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,CAAD,CAAO,CAChChB,cAAc,gCACTD,WADS,MAEZN,UAAU,CAAEuB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,WAAf,EAFA,GAAd,CAID,CALD,CAOA,GAAMC,CAAAA,sBAAsB,CAAG,QAAzBA,CAAAA,sBAAyB,CAACJ,CAAD,CAAO,CACpChB,cAAc,gCACTD,WADS,MAEZL,cAAc,CAAEsB,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeC,WAAf,EAFJ,GAAd,CAID,CALD,CAOA,GAAME,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,SAAD,CAAe,CACxCtB,cAAc,gCACTD,WADS,MAEZJ,gBAAgB,CAAE2B,SAFN,GAAd,CAID,CALD,CAOA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBvB,cAAc,gCAAMD,WAAN,MAAmBH,QAAQ,CAAE,CAACG,WAAW,CAACH,QAA1C,GAAd,CACD,CAFD,CAIA,GAAM4B,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/BxB,cAAc,gCACTD,WADS,MAEZD,KAAK,CAAEC,WAAW,CAACD,KAAZ,CAAoB,EAFf,GAAd,CAID,CALD,CAOA;AACA,GAAM2B,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CACjC,GAAIC,CAAAA,SAAS,CAAGnC,IAAI,CAACA,IAAL,CAAUoC,UAAV,CAAqBC,GAArB,CAAyB,SAACC,GAAD,CAAMC,KAAN,CAAgB,CACvD,mBAAO,KAAC,IAAD,EAAM,QAAQ,CAAED,GAAhB,EAA0BC,KAA1B,CAAP,CACD,CAFe,CAAhB,CAGAjB,OAAO,CAACC,GAAR,CAAY,mCAAZ,EACA,MAAOY,CAAAA,SAAP,CACD,CAND,CAQA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACE,KAAC,SAAD,EACE,WAAW,CAAC,mBADd,CAEE,QAAQ,CAAEX,kBAFZ,EADF,cAKE,KAAC,SAAD,EACE,WAAW,CAAC,wBADd,CAEE,QAAQ,CAAEK,sBAFZ,EALF,cASE,KAAC,YAAD,EACE,OAAO,CAAEC,kBADX,CAEE,YAAY,CAAEE,YAFhB,CAGE,SAAS,CAAExB,WAAW,CAACJ,gBAHzB,CAIE,QAAQ,CAAEI,WAAW,CAACH,QAJxB,EATF,cAgBE,YAAK,SAAS,CAAC,SAAf,uBACE,KAAC,UAAD,EAAY,KAAK,CAAC,KAAlB,CAAwB,OAAO,CAAEK,OAAjC,CAA0C,IAAI,CAAE,GAAhD,EADF,EAhBF,cAoBE,mBACGV,IAAI,CAACA,IAAL,mBACcA,IAAI,CAACA,IAAL,CAAUoC,UAAV,CAAqBI,MADnC,gBACgDxC,IAAI,CAACyC,YADrD,WAEG,IAHN,EApBF,CA0BGzC,IAAI,CAACA,IAAL,CAAYkC,oBAAoB,EAAhC,CAAqC,IA1BxC,CA4BGlC,IAAI,CAAC0C,WAAL,GAAqB,IAArB,cACC,KAAC,WAAD,EAAa,OAAO,CAAET,kBAAtB,EADD,CAEG,IA9BN,GADF,CAkCD,CAED,cAAenC,CAAAA,KAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport \"./Games.css\";\nimport Game from \"../Game/Game\";\nimport SearchBar from \"../SearchBar/SearchBar\";\nimport RadioButtons from \"../RadioButtons/RadioButtons\";\nimport LoadMoreBtn from \"../LoadMoreBtn/LoadMoreBtn\";\nimport MoonLoader from \"react-spinners/ClipLoader\";\n\nfunction Games() {\n  const [data, setData] = React.useState({});\n  const [searchInput, setSearchInput] = React.useState({\n    titleInput: \"\",\n    publisherInput: \"\",\n    radioButtonInput: \"-YearReleased\",\n    arrowBtn: true, // pointing up if true\n    pageNum: 1, // pagination number\n    limit: 20, // records per page\n  });\n  const [loading, setLoading] = React.useState(false);\n\n  // Initial fetch on page load and if searchInput changes\n  useEffect(() => {\n    // Make sure '-' is appended to radioButtonInput if needed\n    let radioButtonVal;\n    if (searchInput.arrowBtn) {\n      radioButtonVal =\n        searchInput.radioButtonInput.charAt(0) === \"-\"\n          ? searchInput.radioButtonInput\n          : \"-\" + searchInput.radioButtonInput;\n    } else\n      radioButtonVal =\n        searchInput.radioButtonInput.charAt(0) === \"-\"\n          ? searchInput.radioButtonInput.substring(1)\n          : searchInput.radioButtonInput;\n\n    setLoading(true);\n    fetch(\n      //\"https://video-game-data-api.herokuapp.com/api/video-game-data/data/?page=1&limit=20\",\n      `http://localhost:5000/api/video-game-data/data/?page=${searchInput.pageNum}&limit=${searchInput.limit}&sort=${radioButtonVal}&filterTitle=${searchInput.titleInput}&filterPublisher=${searchInput.publisherInput}`,\n      {\n        method: \"GET\",\n      }\n    )\n      .then((res) => res.json())\n      .then((data) => {\n        setData(data);\n        setLoading(false);\n      })\n      .catch((error) => console.log(\"Something wrong with api :(\"));\n  }, [searchInput]);\n\n  const onTitleInputChange = (e) => {\n    setSearchInput({\n      ...searchInput,\n      titleInput: e.target.value.toLowerCase(),\n    });\n  };\n\n  const onPublisherInputChange = (e) => {\n    setSearchInput({\n      ...searchInput,\n      publisherInput: e.target.value.toLowerCase(),\n    });\n  };\n\n  const onRadioButtonClick = (selection) => {\n    setSearchInput({\n      ...searchInput,\n      radioButtonInput: selection,\n    });\n  };\n\n  const onArrowClick = () => {\n    setSearchInput({ ...searchInput, arrowBtn: !searchInput.arrowBtn });\n  };\n\n  const onLoadMoreBtnClick = () => {\n    setSearchInput({\n      ...searchInput,\n      limit: searchInput.limit + 20,\n    });\n  };\n\n  // Takes the records from the data array and returns game componentes for each\n  const createGameComponents = () => {\n    let gamesList = data.data.videoGames.map((row, index) => {\n      return <Game gameData={row} key={index} />;\n    });\n    console.log(\"finished creating game components\");\n    return gamesList;\n  };\n\n  return (\n    <div className=\"games\">\n      <SearchBar\n        placeholder=\"Search by Tile...\"\n        onChange={onTitleInputChange}\n      />\n      <SearchBar\n        placeholder=\"Search by Publisher...\"\n        onChange={onPublisherInputChange}\n      />\n      <RadioButtons\n        onClick={onRadioButtonClick}\n        onArrowClick={onArrowClick}\n        buttonVal={searchInput.radioButtonInput}\n        arrowBtn={searchInput.arrowBtn}\n      />\n\n      <div className=\"spinner\">\n        <MoonLoader color=\"red\" loading={loading} size={180} />\n      </div>\n\n      <p>\n        {data.data\n          ? `Showing ${data.data.videoGames.length} of ${data.totalResults} Games`\n          : null}\n      </p>\n\n      {data.data ? createGameComponents() : null}\n\n      {data.hasNextPage === true ? (\n        <LoadMoreBtn onClick={onLoadMoreBtnClick} />\n      ) : null}\n    </div>\n  );\n}\n\nexport default Games;\n"]},"metadata":{},"sourceType":"module"}